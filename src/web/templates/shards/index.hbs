{{> layout/header }}

<h1 class="page-header">Shards</h1>

<div class="row">
    <div class="col-xs-12">
        <p>Shards are arbitrary pieces of data which track the state of a particular item or entity. A shard's value can be used in a workflow for branching (if/then) or as additional data. Shards can be updated via simple web calls (such as those from <a href="https://ifttt.com/">IFTTT</a>). For example, a shard could be "At home", and its value would be toggled "true" or "false". You could then use this in workflows to make decisions, such as "If my front door opens and I am not at home, send me a text."</p>

        {{#if showSavedMsg}}
            <div class="alert alert-success alert-dismissible fade in" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true"><i class="fa fa-times" aria-hidden="true"></i></span>
                </button>
                Shard saved.
            </div>
        {{/if}}

        <a href="/shards/add/" class="btn btn-primary"><i class="fa fa-plus" aria-hidden="true"></i> Add Shard</a>

        <table id="shard-table" class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>&nbsp;</th>
                    <th>ID</th>
                    <th>Description</th>
                    <th>Type</th>
                    <th>Value</th>
                    <th>Last Updated</th>
                </tr>
            </thead>
            <tbody>
            {{#each shards}}
                <tr>
                    <td>
                        <a href="/shards/edit/{{ id }}/" title="Edit shard"><i class="fa fa-edit" aria-hidden="true"></i></a>
                        <a href="/shards/history/{{ id }}/" title="View history"><i class="fa fa-history" aria-hidden="true"></i></a>
                        <a href="#" class="js-delete-shard" title="Delete shard" data-shard="{{ id }}"><i class="fa fa-remove text-danger" aria-hidden="true"></i></a>
                    </td>
                    <td>{{ id }}</td>
                    <td>{{ description }}</td>
                    <td>{{ type }}</td>
                    <td>{{#equal type "json"}}<pre><code>{{ json value }}</code></pre>{{ else }}{{ value }}{{/equal}}</td>
                    <td>{{ dateFormat updated }}</td>
                </tr>
            {{ else }}
                <tr>
                    <td colspan="6">No shards found.</td>
                </tr>
            {{/each}}
            </tbody>
        </table>
    </div>
</div>

<div id="add-shard-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            {{> shards/add_edit_form }}
        </div>
    </div>
</div>

<div id="edit-shard-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            {{> shards/add_edit_form }}
        </div>
    </div>
</div>

{{> layout/footer }}
