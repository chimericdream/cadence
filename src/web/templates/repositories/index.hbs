{{> layout/header }}

<h1 class="page-header">Repositories</h1>

<div class="row">
    <div class="col-xs-12">
        <p>Repositories are arbitrary pieces of data which track the state of a particular item or entity. A repository's value can be used in a workflow for branching (if/then) or as additional data. Repositories can be updated via simple web calls (such as those from <a href="https://ifttt.com/">IFTTT</a>). For example, a repository could be "At home", and its value would be toggled "true" or "false". You could then use this in workflows to make decisions, such as "If my front door opens and I am not at home, send me a text."</p>

        {{#if showSavedMsg}}
            <div class="alert alert-success alert-dismissible fade in" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true"><i class="fa fa-times" aria-hidden="true"></i></span>
                </button>
                Repository saved.
            </div>
        {{/if}}

        <a href="/repositories/add/" class="btn btn-primary"><i class="fa fa-plus" aria-hidden="true"></i> Add Repository</a>

        <table id="repository-table" class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>&nbsp;</th>
                    <th>ID</th>
                    <th>Description</th>
                    <th>Type</th>
                    <th>Value</th>
                    <th>Last Updated</th>
                </tr>
            </thead>
            <tbody>
            {{#each repositories}}
                <tr>
                    <td>
                        <a href="/repositories/edit/{{ id }}/" title="Edit repository"><i class="fa fa-edit" aria-hidden="true"></i></a>
                        <a href="/repositories/history/{{ id }}/" title="View history"><i class="fa fa-history" aria-hidden="true"></i></a>
                    </td>
                    <td>{{ id }}</td>
                    <td>{{ description }}</td>
                    <td>{{ type }}</td>
                    <td>{{ value }}</td>
                    <td>{{ dateFormat updated }}</td>
                </tr>
            {{ else }}
                <tr>
                    <td colspan="6">No repositories found.</td>
                </tr>
            {{/each}}
            </tbody>
        </table>
    </div>
</div>

<div id="add-repository-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            {{> repositories/add_edit_form }}
        </div>
    </div>
</div>

<div id="edit-repository-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            {{> repositories/add_edit_form }}
        </div>
    </div>
</div>

{{> layout/footer }}
